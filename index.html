<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="theme-color" content="#394867"/>
    <title>Football Pocket</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/materialize.min.css">
    <link rel="manifest" href="/manifest.json">
    <link
    rel="apple-touch-icon"
    sizes="57x57"
        href="Images/icon/apple-icon-57x57.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="60x60"
        href="Images/icon/apple-icon-60x60.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="72x72"
        href="Images/icon/apple-icon-72x72.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="76x76"
        href="Images/icon/apple-icon-76x76.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="114x114"
        href="Images/icon/apple-icon-114x114.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="120x120"
        href="Images/icon/apple-icon-120x120.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="144x144"
        href="Images/icon/apple-icon-144x144.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="152x152"
        href="Images/icon/apple-icon-152x152.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="Images/icon/apple-icon-180x180.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="Images/icon/android-icon-192x192.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="32x32"
        href="Images/icon/favicon-32x32.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="96x96"
        href="Images/icon/favicon-96x96.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="16x16"
        href="Images/icon/favicon-16x16.png"
    />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
    <body>

        <!-- Navigasi -->
        <nav class="blue-grey" role="navigation">
            <div class="nav-wrapper container">
            <a href="#" class="brand-logo" id="logo-container">Football</a>
            <a href="#" class="sidenav-trigger" data-target="nav-mobile">â˜°</a>
            <ul class="topnav right hide-on-med-and-down"></ul>
            <ul class="sidenav" id="nav-mobile"></ul>
            </div>
        </nav>
        <!-- Akhir Navigasi -->

        <!-- Content -->
        <div class="container" id="body-content"></div>
        <!-- Akhir Content -->
        
        </footer>
        <footer class="page-footer">
            <div class="container">
            <div class="row">
                <div class="col l6 s12">
                <h5 class="white-text">Football</h5>
                <p class="grey-text text-lighten-4">Football Data Standings.</p>
                </div>
                <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Sources</h5>
                <ul>
                    <li><a class="grey-text text-lighten-3" href="https://www.football-data.org/documentation/api" target="blank">https://www.football-data.org/documentation/api</a></li>
                </div>
            </div>
            </div>
            <div class="footer-copyright">
            <div class="container">
                &copy; 2020 Muhamad Hilman
            <a class="grey-text text-lighten-4 right" href="https://goo.gl/maps/8i818paDrSzshMTp9" target="blank">
                <span class="material-icons">
                    location_on
                </span>
            </a>
            </div>
            </div>
        </footer>
        <!-- Akhir Footer -->

        <script src="assets/js/materialize.min.js"></script>
        <script src="assets/js/idb.js"></script>
        <script src="assets/js/modules/database.js"></script>
        <script src="assets/js/main.js" type="module"></script>
        <script src="assets/js/modules/api.js"></script>

        <script>
            if ("serviceWorker" in navigator) {
            window.addEventListener("load", function () {
                navigator.serviceWorker
                .register("/service-worker.js")
                .then(function () {
                    console.log("Pendaftaran ServiceWorker berhasil");
                })
                .catch(function () {
                    console.log("Pendaftaran ServiceWorker gagal");
                });
            });
            } else {
            console.log("ServiceWorker belum didukung browser ini.");
            }
    
            const requestNotif = () => {
            Notification.requestPermission().then((res) => {
                if (res === "denied") {
                console.log("Notifikasi tidak diizinkan");
                return;
                } else if (res === "default") {
                console.log("Menutup Box");
                return;
                }
                console.log("Notifikasi diizinkan");
            });
            };
    
            "Notification" in window
            ? requestNotif()
            : console.log("broser tidak support notif");
    
            navigator.serviceWorker.getRegistration().then((reg) => {
            reg.showNotification("Notifikasi diizinkan");
            });
    
            if ("PushManager" in window) {
            navigator.serviceWorker.getRegistration().then(function (reg) {
                reg.pushManager
                .subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: urlBase64ToUint8Array(
                    "BP1J72fgs8GR7J5HGQ_bxmI-ug64eBy46Y1_LLG02csEKiFVVdhxMoHGJQotkopHE_LGX5N5Eg4Sy01VkUas_60"
                    ),
                })
                .then(function (sub) {
                    console.log(
                    "Berhasil melakukan subscribe dengan endpoint: ",
                    sub.endpoint
                    );
                    console.log(
                    "Berhasil melakukan subscribe dengan endpoint: ",
                    sub.endpoint
                    );
                    console.log(
                    "Berhasil melakukan subscribe dengan p256dh key: ",
                    btoa(
                        String.fromCharCode.apply(
                        null,
                        new Uint8Array(sub.getKey("p256dh"))
                        )
                    )
                    );
                    console.log(
                    "Berhasil melakukan subscribe dengan auth key: ",
                    btoa(
                        String.fromCharCode.apply(
                        null,
                        new Uint8Array(sub.getKey("auth"))
                        )
                    )
                    );
                })
                .catch(function (e) {
                    console.error("Tidak dapat melakukan subscribe ", e);
                });
            });
            }
    
            function urlBase64ToUint8Array(base64String) {
            const padding = "=".repeat((4 - (base64String.length % 4)) % 4);
            const base64 = (base64String + padding)
                .replace(/-/g, "+")
                .replace(/_/g, "/");
            const rawData = window.atob(base64);
            const outputArray = new Uint8Array(rawData.length);
            for (let i = 0; i < rawData.length; ++i) {
                outputArray[i] = rawData.charCodeAt(i);
            }
            return outputArray;
            }
        </script>
        
    </body>
</html>